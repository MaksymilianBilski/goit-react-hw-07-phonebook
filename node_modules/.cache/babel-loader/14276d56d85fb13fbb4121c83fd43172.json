{"ast":null,"code":"var _jsxFileName = \"M:\\\\programy\\\\Programy_kodowanie\\\\github\\\\goit-react-hw-06-phonebook\\\\src\\\\context\\\\PhonebookContext.jsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { useContext, createContext, useEffect, useState } from 'react';\nimport { nanoid } from 'nanoid';\nimport { useDispatch } from 'react-redux';\nimport { addContact, setContacts } from 'redux/actions';\nimport { getContacts, getFilter } from 'redux/selectors';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const PhonebookContext = /*#__PURE__*/createContext();\nexport const usePhonebookContext = () => {\n  _s();\n\n  return useContext(PhonebookContext);\n};\n\n_s(usePhonebookContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nconst PhonebookProvider = _ref => {\n  _s2();\n\n  let {\n    children\n  } = _ref;\n  const dispatch = useDispatch(); // const [contacts, setContacts] = useState([]);\n\n  const [filter, setFilter] = useState('');\n  useEffect(() => {\n    if (JSON.parse(localStorage.getItem('contacts')) === undefined || JSON.parse(localStorage.getItem('contacts')) === null) {\n      return;\n    }\n\n    const localUsers = JSON.parse(localStorage.getItem('contacts'));\n    dispatch(setContacts(...localUsers));\n  }, [dispatch]);\n\n  const onFormSubmit = e => {\n    e.preventDefault();\n    const form = e.currentTarget;\n    const name = form.elements.name;\n    const number = form.elements.number;\n\n    if (contacts.find(contact => contact.name === name.value && contact.number === number.value)) {\n      alert(`${name.value} is already in contacts`);\n      return;\n    }\n\n    const contact = {\n      name: name.value,\n      number: number.value,\n      id: nanoid()\n    }; //add single contact to local storage\n\n    const newContacts = [...contacts, contact];\n    dispatch(setContacts(newContacts));\n    localStorage.setItem('contacts', JSON.stringify(newContacts));\n    form.reset();\n  };\n\n  const onFilterChange = evt => {\n    setFilter(evt.target.value);\n  };\n\n  const onContactDelete = id => {\n    const contacts = getContacts();\n    const deletedContacts = contacts.filter(contact => contact.id !== id);\n    setContacts(deletedContacts);\n    localStorage.setItem('contacts', JSON.stringify(deletedContacts));\n  };\n\n  return /*#__PURE__*/_jsxDEV(PhonebookContext.Provider, {\n    value: {\n      onContactDelete,\n      onFilterChange,\n      onFormSubmit,\n      filter\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(PhonebookProvider, \"9Plki01lh6bkFXJMhRUt5GP49rI=\", false, function () {\n  return [useDispatch];\n});\n\n_c = PhonebookProvider;\nexport default PhonebookProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"PhonebookProvider\");","map":{"version":3,"sources":["M:/programy/Programy_kodowanie/github/goit-react-hw-06-phonebook/src/context/PhonebookContext.jsx"],"names":["useContext","createContext","useEffect","useState","nanoid","useDispatch","addContact","setContacts","getContacts","getFilter","PhonebookContext","usePhonebookContext","PhonebookProvider","children","dispatch","filter","setFilter","JSON","parse","localStorage","getItem","undefined","localUsers","onFormSubmit","e","preventDefault","form","currentTarget","name","elements","number","contacts","find","contact","value","alert","id","newContacts","setItem","stringify","reset","onFilterChange","evt","target","onContactDelete","deletedContacts"],"mappings":"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","sourcesContent":["import { useContext, createContext, useEffect, useState } from 'react';\r\nimport { nanoid } from 'nanoid';\r\nimport { useDispatch } from 'react-redux';\r\nimport { addContact, setContacts } from 'redux/actions';\r\nimport { getContacts, getFilter } from 'redux/selectors';\r\n\r\nexport const PhonebookContext = createContext();\r\nexport const usePhonebookContext = () => useContext(PhonebookContext);\r\n\r\nconst PhonebookProvider = ({ children }) => {\r\n  const dispatch = useDispatch();\r\n\r\n  // const [contacts, setContacts] = useState([]);\r\n  const [filter, setFilter] = useState('');\r\n\r\n  useEffect(() => {\r\n    if (\r\n      JSON.parse(localStorage.getItem('contacts')) === undefined ||\r\n      JSON.parse(localStorage.getItem('contacts')) === null\r\n    ) {\r\n      return;\r\n    }\r\n    const localUsers = JSON.parse(localStorage.getItem('contacts'));\r\n\r\n    dispatch(setContacts(...localUsers));\r\n  }, [dispatch]);\r\n\r\n  const onFormSubmit = e => {\r\n    e.preventDefault();\r\n    const form = e.currentTarget;\r\n    const name = form.elements.name;\r\n    const number = form.elements.number;\r\n    if (\r\n      contacts.find(\r\n        contact =>\r\n          contact.name === name.value && contact.number === number.value\r\n      )\r\n    ) {\r\n      alert(`${name.value} is already in contacts`);\r\n      return;\r\n    }\r\n\r\n    const contact = {\r\n      name: name.value,\r\n      number: number.value,\r\n      id: nanoid(),\r\n    };\r\n    //add single contact to local storage\r\n    const newContacts = [...contacts, contact];\r\n    dispatch(setContacts(newContacts));\r\n    localStorage.setItem('contacts', JSON.stringify(newContacts));\r\n    form.reset();\r\n  };\r\n\r\n  const onFilterChange = evt => {\r\n    setFilter(evt.target.value);\r\n  };\r\n\r\n  const onContactDelete = id => {\r\n    const contacts = getContacts();\r\n    const deletedContacts = contacts.filter(contact => contact.id !== id);\r\n    setContacts(deletedContacts);\r\n    localStorage.setItem('contacts', JSON.stringify(deletedContacts));\r\n  };\r\n\r\n  return (\r\n    <PhonebookContext.Provider\r\n      value={{\r\n        onContactDelete,\r\n        onFilterChange,\r\n        onFormSubmit,\r\n        filter,\r\n      }}\r\n    >\r\n      {children}\r\n    </PhonebookContext.Provider>\r\n  );\r\n};\r\n\r\nexport default PhonebookProvider;\r\n"]},"metadata":{},"sourceType":"module"}